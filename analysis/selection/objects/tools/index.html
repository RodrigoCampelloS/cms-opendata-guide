
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="CMS Open Data Guide">
      
      
      
        <link rel="canonical" href="https://cms-opendata-guide.web.cern.ch/analysis/selection/objects/tools/">
      
      
        <link rel="prev" href="../objects/">
      
      
        <link rel="next" href="../muons/">
      
      <link rel="icon" href="../../../../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.9">
    
    
      
        <title>Common Tools - CMS Open Data Guide</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.85bb2934.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.a6bdf11c.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Lato";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#common-tools-for-physics-objects" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="CMS Open Data Guide" class="md-header__button md-logo" aria-label="CMS Open Data Guide" data-md-component="logo">
      
  <img src="../../../../images/cmslogo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CMS Open Data Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Common Tools
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/cernopendata/cms-opendata-guide" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    cms-opendata-guide
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="CMS Open Data Guide" class="md-nav__button md-logo" aria-label="CMS Open Data Guide" data-md-component="logo">
      
  <img src="../../../../images/cmslogo.png" alt="logo">

    </a>
    CMS Open Data Guide
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/cernopendata/cms-opendata-guide" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    cms-opendata-guide
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          CMS Open Data
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          CMS Open Data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../cmsOpenData/cernportal/" class="md-nav__link">
        CERN Open Data Portal
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../cmsOpenData/cmsopendata/" class="md-nav__link">
        CMS Open Data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../cmsOpenData/findingData/" class="md-nav__link">
        Finding Data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../cmsOpenData/workshops/" class="md-nav__link">
        Workshops
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Computing Tools
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Computing Tools
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tools/unix/" class="md-nav__link">
        UNIX
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tools/root/" class="md-nav__link">
        ROOT
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tools/cppandpython/" class="md-nav__link">
        C++ and Python
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tools/git/" class="md-nav__link">
        Git
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tools/docker/" class="md-nav__link">
        Docker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tools/virtualmachines/" class="md-nav__link">
        Virtual Machines
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          CMSSW
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          CMSSW
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../cmssw/cmsswoverview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../cmssw/cmsswdatamodel/" class="md-nav__link">
        Data Model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../cmssw/cmsswanalyzers/" class="md-nav__link">
        Analyzers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../cmssw/cmsswconfigure/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../cmssw/cmsswconditions/" class="md-nav__link">
        Conditions Data
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Analysis
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Analysis
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
      
      
      
        <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
          Data and Simulation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_1">
          <span class="md-nav__icon md-icon"></span>
          Data and Simulation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../datasim/collisiondata/" class="md-nav__link">
        Collision Data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../datasim/mcsimulations/" class="md-nav__link">
        MC Simulations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../datasim/eventgeneration/" class="md-nav__link">
        Event Generation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
          Selection
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          Selection
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../validatedRuns/" class="md-nav__link">
        Validated Runs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../triggers/" class="md-nav__link">
        Triggers
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_5_2_3" id="__nav_5_2_3_label" tabindex="0">
          Physics Objects
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_5_2_3">
          <span class="md-nav__icon md-icon"></span>
          Physics Objects
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../objects/" class="md-nav__link">
        Physics Objects
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Common Tools
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Common Tools
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#4-vector-access-functions" class="md-nav__link">
    4-vector access functions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#track-access-functions" class="md-nav__link">
    Track access functions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#matching-to-generated-particles" class="md-nav__link">
    Matching to generated particles
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../muons/" class="md-nav__link">
        Muons
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../electrons/" class="md-nav__link">
        Electrons
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../photons/" class="md-nav__link">
        Photons
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../jets/" class="md-nav__link">
        Jets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../met/" class="md-nav__link">
        Missing ET
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../taus/" class="md-nav__link">
        Taus
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_4" >
      
      
      
        <label class="md-nav__link" for="__nav_5_2_4" id="__nav_5_2_4_label" tabindex="0">
          ID Efficiency study
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_2_4">
          <span class="md-nav__icon md-icon"></span>
          ID Efficiency study
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../idefficiencystudy/tagandprobe/" class="md-nav__link">
        Tag and Probe
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../idefficiencystudy/signalextraction/" class="md-nav__link">
        Signal extraction
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_4_3" >
      
      
      
        <label class="md-nav__link" for="__nav_5_2_4_3" id="__nav_5_2_4_3_label" tabindex="0">
          Tutorial
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_2_4_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_2_4_3">
          <span class="md-nav__icon md-icon"></span>
          Tutorial
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../idefficiencystudy/tutorial/03-sidebandsubtraction/" class="md-nav__link">
        Sideband Subtraction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../idefficiencystudy/tutorial/04-comparison/" class="md-nav__link">
        Comparison
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../idefficiencystudy/tutorial/05-systematic/" class="md-nav__link">
        Systematic
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../idefficiencystudy/tutorial/06-Z-systematic/" class="md-nav__link">
        Z-Systematic
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_4_4" >
      
      
      
        <label class="md-nav__link" for="__nav_5_2_4_4" id="__nav_5_2_4_4_label" tabindex="0">
          Reference Guide (SB)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_2_4_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_2_4_4">
          <span class="md-nav__icon md-icon"></span>
          Reference Guide (SB)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../idefficiencystudy/sidebandreferenceguide/macro/" class="md-nav__link">
        The Macro
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../idefficiencystudy/sidebandreferenceguide/FitFunctions/" class="md-nav__link">
        FitFunction class
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../idefficiencystudy/sidebandreferenceguide/SidebandSubtraction/" class="md-nav__link">
        SidebandSubtraction class
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../idefficiencystudy/sidebandreferenceguide/InvariantMass/" class="md-nav__link">
        InvariantMass class
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../idefficiencystudy/sidebandreferenceguide/MassValues/" class="md-nav__link">
        MassValues struct
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../idefficiencystudy/sidebandreferenceguide/Type/" class="md-nav__link">
        Type class
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../idefficiencystudy/sidebandreferenceguide/TagProbe/" class="md-nav__link">
        TagProbe class
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../idefficiencystudy/sidebandreferenceguide/PtEtaPhi/" class="md-nav__link">
        PtEtaPhi class
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../idefficiencystudy/sidebandreferenceguide/PassingFailing/" class="md-nav__link">
        PassingFailing class
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_4_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5_2_4_5" id="__nav_5_2_4_5_label" tabindex="0">
          Reference Guide (Fit)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_2_4_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_2_4_5">
          <span class="md-nav__icon md-icon"></span>
          Reference Guide (Fit)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../idefficiencystudy/fittingreferenceguide/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../idefficiencystudy/fittingreferenceguide/src_files/" class="md-nav__link">
        Src files
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
      
      
      
        <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
          Luminosity
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          Luminosity
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../luminosity/lumi/" class="md-nav__link">
        Luminosity
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
      
      
      
        <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
          Backgrounds
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          Backgrounds
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../backgrounds/techniques/" class="md-nav__link">
        Techniques
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../backgrounds/qcdestimation/" class="md-nav__link">
        QCD Estimation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
          Systematics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_5">
          <span class="md-nav__icon md-icon"></span>
          Systematics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../systematics/lumiuncertain/" class="md-nav__link">
        Luminosity Uncertainties
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../systematics/mcuncertain/" class="md-nav__link">
        MC Uncertainty
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5_3" >
      
      
      
        <label class="md-nav__link" for="__nav_5_5_3" id="__nav_5_5_3_label" tabindex="0">
          Physics Object Uncertainty
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_5_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_5_3">
          <span class="md-nav__icon md-icon"></span>
          Physics Object Uncertainty
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../systematics/objectsuncertain/leptonuncertain/" class="md-nav__link">
        Lepton/Photon uncertainties
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../systematics/objectsuncertain/jetmetuncertain/" class="md-nav__link">
        Jet/MET uncertainties
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../systematics/objectsuncertain/btaguncertain/" class="md-nav__link">
        Tagging uncertainties
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../systematics/pileupuncertain/" class="md-nav__link">
        Pileup Uncertainty
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_6" >
      
      
      
        <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="0">
          Interpretation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_6">
          <span class="md-nav__icon md-icon"></span>
          Interpretation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../interpretation/stats/" class="md-nav__link">
        Statistics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../interpretation/limits/" class="md-nav__link">
        Upper-limit Calculations
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../faq/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../about/" class="md-nav__link">
        About
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#4-vector-access-functions" class="md-nav__link">
    4-vector access functions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#track-access-functions" class="md-nav__link">
    Track access functions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#matching-to-generated-particles" class="md-nav__link">
    Matching to generated particles
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="common-tools-for-physics-objects">Common tools for physics objects<a class="headerlink" href="#common-tools-for-physics-objects" title="Permanent link">&para;</a></h1>
<p>Many of the most important kinematic quantities defining a physics object are accessed in a common way across all the objects. All objects have associated energy-momentum vectors, typically constructed using <strong>transverse momentum, pseudorapdity, azimuthal angle, and mass or energy</strong>.</p>
<h2 id="4-vector-access-functions">4-vector access functions<a class="headerlink" href="#4-vector-access-functions" title="Permanent link">&para;</a></h2>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Run 1 Data</label><label for="__tabbed_1_2">Run 2 Data</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>In <a href="https://github.com/cms-opendata-analyses/PhysObjectExtractorTool/blob/2012/PhysObjectExtractor/src/MuonAnalyzer.cc">MuonAnalyzer.cc</a>, the muon four-vector elements are accessed as shown below. In this example, the values for each muon are stored into an array, which will become a branch in a ROOT TTree.</p>
<div class="highlight"><pre><span></span><code><span class="n">Handle</span><span class="o">&lt;</span><span class="n">reco</span><span class="o">::</span><span class="n">MuonCollection</span><span class="o">&gt;</span><span class="w"> </span><span class="n">mymuons</span><span class="p">;</span>
<span class="n">iEvent</span><span class="p">.</span><span class="n">getByLabel</span><span class="p">(</span><span class="n">muonInput</span><span class="p">,</span><span class="w"> </span><span class="n">mymuons</span><span class="p">);</span>

<span class="p">[...]</span>

<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">reco</span><span class="o">::</span><span class="n">MuonCollection</span><span class="o">::</span><span class="n">const_iterator</span><span class="w"> </span><span class="n">itmuon</span><span class="o">=</span><span class="n">mymuons</span><span class="o">-&gt;</span><span class="n">begin</span><span class="p">();</span><span class="w"> </span><span class="n">itmuon</span><span class="o">!=</span><span class="n">mymuons</span><span class="o">-&gt;</span><span class="n">end</span><span class="p">();</span><span class="w"> </span><span class="o">++</span><span class="n">itmuon</span><span class="p">){</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">itmuon</span><span class="o">-&gt;</span><span class="n">pt</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">mu_min_pt</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="n">muon_e</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">itmuon</span><span class="o">-&gt;</span><span class="n">energy</span><span class="p">());</span>
<span class="w">    </span><span class="n">muon_pt</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">itmuon</span><span class="o">-&gt;</span><span class="n">pt</span><span class="p">());</span>
<span class="w">    </span><span class="n">muon_eta</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">itmuon</span><span class="o">-&gt;</span><span class="n">eta</span><span class="p">());</span>
<span class="w">    </span><span class="n">muon_phi</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">itmuon</span><span class="o">-&gt;</span><span class="n">phi</span><span class="p">());</span>

<span class="w">    </span><span class="n">muon_px</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">itmuon</span><span class="o">-&gt;</span><span class="n">px</span><span class="p">());</span>
<span class="w">    </span><span class="n">muon_py</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">itmuon</span><span class="o">-&gt;</span><span class="n">py</span><span class="p">());</span>
<span class="w">    </span><span class="n">muon_pz</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">itmuon</span><span class="o">-&gt;</span><span class="n">pz</span><span class="p">());</span>

<span class="w">    </span><span class="n">muon_mass</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">itmuon</span><span class="o">-&gt;</span><span class="n">mass</span><span class="p">());</span>

<span class="p">}</span>
</code></pre></div>
<p>The same type of kinematic member functions are used in all the different analyzers in the <a href="https://github.com/cms-opendata-analyses/PhysObjectExtractorTool/tree/2012/PhysObjectExtractor/src">src/ directory of the POET example code</a>. These and other basic kinematic methods are defined in the <a href="https://github.com/cms-sw/cmssw/blob/CMSSW_5_3_X/DataFormats/Candidate/interface/LeafCandidate.h">LeafCandidate class</a> of the CMSSW DataFormats package (rendered for maybe easier readability in the <a href="https://cmsdoxygen.web.cern.ch/cmsdoxygen/CMSSW_5_3_30/doc/html/dc/d78/classreco_1_1LeafCandidate.html">CMSSW software documentation</a>).</p>
</div>
<div class="tabbed-block">
<p>In <a href="https://github.com/cms-opendata-analyses/PhysObjectExtractorTool/blob/2015MiniAOD/PhysObjectExtractor/src/MuonAnalyzer.cc">MuonAnalyzer.cc</a>, the muon four-vector elements are accessed as shown below. In this example, the values for each muon are stored into an array, which will become a branch in a ROOT TTree.</p>
<div class="highlight"><pre><span></span><code><span class="n">Handle</span><span class="o">&lt;</span><span class="n">pat</span><span class="o">::</span><span class="n">MuonCollection</span><span class="o">&gt;</span><span class="w"> </span><span class="n">muons</span><span class="p">;</span>
<span class="n">iEvent</span><span class="p">.</span><span class="n">getByToken</span><span class="p">(</span><span class="n">muonToken_</span><span class="p">,</span><span class="w"> </span><span class="n">muons</span><span class="p">);</span>

<span class="p">[...]</span>

<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">pat</span><span class="o">::</span><span class="n">Muon</span><span class="w"> </span><span class="o">&amp;</span><span class="n">mu</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="n">muons</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">muon_e</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">mu</span><span class="p">.</span><span class="n">energy</span><span class="p">());</span>
<span class="w">  </span><span class="n">muon_pt</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">mu</span><span class="p">.</span><span class="n">pt</span><span class="p">());</span>
<span class="w">  </span><span class="n">muon_px</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">mu</span><span class="p">.</span><span class="n">px</span><span class="p">());</span>
<span class="w">  </span><span class="n">muon_py</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">mu</span><span class="p">.</span><span class="n">py</span><span class="p">());</span>
<span class="w">  </span><span class="n">muon_pz</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">mu</span><span class="p">.</span><span class="n">pz</span><span class="p">());</span>
<span class="w">  </span><span class="n">muon_eta</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">mu</span><span class="p">.</span><span class="n">eta</span><span class="p">());</span>
<span class="w">  </span><span class="n">muon_phi</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">mu</span><span class="p">.</span><span class="n">phi</span><span class="p">());</span>

<span class="w">  </span><span class="p">[...]</span>

<span class="p">}</span>
</code></pre></div>
<p>The same type of kinematic member functions are used in all the different analyzers in the <a href="https://github.com/cms-opendata-analyses/PhysObjectExtractorTool/tree/2015MiniAOD/PhysObjectExtractor/src">src/ directory of the POET example code</a>. These and other basic kinematic methods are defined in the <a href="https://github.com/cms-sw/cmssw/blob/CMSSW_7_6_7/DataFormats/Candidate/interface/LeafCandidate.h">LeafCandidate class</a> of the CMSSW DataFormats package (rendered for maybe easier readability in the <a href="https://cmsdoxygen.web.cern.ch/cmsdoxygen/CMSSW_7_6_7/doc/html/dc/d78/classreco_1_1LeafCandidate.html">CMSSW software documentation</a>).</p>
</div>
</div>
</div>
<h2 id="track-access-functions">Track access functions<a class="headerlink" href="#track-access-functions" title="Permanent link">&para;</a></h2>
<p>Many objects are also connected to tracks from the CMS tracking detectors. Information from
tracks provides other kinematic quantities that are common to multiple types of objects.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Run 1 Data</label><label for="__tabbed_2_2">Run 2 Data</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>From a muon object, we can access the associated track while looping over muons via the <code>globalTrack</code> method:</p>
<div class="highlight"><pre><span></span><code><span class="k">auto</span><span class="w"> </span><span class="n">trk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mu</span><span class="o">-&gt;</span><span class="n">globalTrack</span><span class="p">();</span><span class="w"> </span><span class="c1">// muon track</span>
</code></pre></div>
<p>Often, the most pertinent information about an object (such as a muon) to access from its
associated track is its <strong>impact parameter</strong> with respect to the primary interaction vertex.
Since muons can also be tracked through the muon detectors, we first check if the track is
well-defined, and then access impact parameters in the xy-plane (<code>dxy</code> or <code>d0</code>) and along
the beam axis (<code>dz</code>), as well as their respective uncertainties. They can be accessed as shown
in this code snippet from <a href="https://github.com/cms-opendata-analyses/PhysObjectExtractorTool/blob/2012/PhysObjectExtractor/src/MuonAnalyzer.cc">MuonAnalyzer</a>:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">trk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">itmuon</span><span class="o">-&gt;</span><span class="n">globalTrack</span><span class="p">();</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">trk</span><span class="p">.</span><span class="n">isNonnull</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">muon_dxy</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">trk</span><span class="o">-&gt;</span><span class="n">dxy</span><span class="p">(</span><span class="n">pv</span><span class="p">));</span>
<span class="w">      </span><span class="n">muon_dz</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">trk</span><span class="o">-&gt;</span><span class="n">dz</span><span class="p">(</span><span class="n">pv</span><span class="p">));</span>
<span class="w">      </span><span class="n">muon_dxyErr</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">trk</span><span class="o">-&gt;</span><span class="n">d0Error</span><span class="p">());</span>
<span class="w">      </span><span class="n">muon_dzErr</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">trk</span><span class="o">-&gt;</span><span class="n">dzError</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div>
<p>These functions need the position of the interaction vertex (<code>pv</code>) as an input and this is provided through the first elemement of the vertex collection <code>vertices</code> which gives the best estimate of the interaction point. The vertex collection is accessed with:</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="n">Handle</span><span class="o">&lt;</span><span class="n">reco</span><span class="o">::</span><span class="n">VertexCollection</span><span class="o">&gt;</span><span class="w"> </span><span class="n">vertices</span><span class="p">;</span>
<span class="w">  </span><span class="n">iEvent</span><span class="p">.</span><span class="n">getByLabel</span><span class="p">(</span><span class="n">InputTag</span><span class="p">(</span><span class="s">&quot;offlinePrimaryVertices&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">vertices</span><span class="p">);</span>

<span class="w">  </span><span class="p">[...]</span>

<span class="w">  </span><span class="n">math</span><span class="o">::</span><span class="n">XYZPoint</span><span class="w"> </span><span class="n">pv</span><span class="p">(</span><span class="n">vertices</span><span class="o">-&gt;</span><span class="n">begin</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">position</span><span class="p">());</span>
</code></pre></div>
<p>Note that the tracking method depends on the object, the electron tracks are found using the Gaussian-sum filter method <code>gsfTrack</code>:</p>
<div class="highlight"><pre><span></span><code><span class="k">auto</span><span class="w"> </span><span class="n">trk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">it</span><span class="o">-&gt;</span><span class="n">gsfTrack</span><span class="p">();</span><span class="w"> </span><span class="c1">// electron track</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>From a muon object, we can access the associated track while looping over muons via the <code>muonBestTrack</code> method.</p>
<p>Often, the most pertinent information about an object (such as a muon) to access from its
associated track is its <strong>impact parameter</strong> with respect to the primary interaction vertex.
Since muons can also be tracked through the muon detectors, we first check if the track is
well-defined, and then access impact parameters in the xy-plane (<code>dxy</code> or <code>d0</code>) and along
the beam axis (<code>dz</code>), as well as their respective uncertainties. They can be accessed as shown
in this code snippet from <a href="https://github.com/cms-opendata-analyses/PhysObjectExtractorTool/blob/2015MiniAOD/PhysObjectExtractor/src/MuonAnalyzer.cc">MuonAnalyzer</a>:</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="n">muon_dxy</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">mu</span><span class="p">.</span><span class="n">muonBestTrack</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">dxy</span><span class="p">(</span><span class="n">PV</span><span class="p">.</span><span class="n">position</span><span class="p">()));</span>
<span class="w">  </span><span class="n">muon_dz</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">mu</span><span class="p">.</span><span class="n">muonBestTrack</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">dz</span><span class="p">(</span><span class="n">PV</span><span class="p">.</span><span class="n">position</span><span class="p">()));</span>
<span class="w">  </span><span class="n">muon_dxyError</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">mu</span><span class="p">.</span><span class="n">muonBestTrack</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">d0Error</span><span class="p">());</span>
<span class="w">  </span><span class="n">muon_dzError</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">mu</span><span class="p">.</span><span class="n">muonBestTrack</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">dzError</span><span class="p">());</span>
</code></pre></div>
<p>These functions need the position of the interaction vertex (<code>PV</code>) as an input and this is provided through the first elemement of the vertex collection <code>vertices</code> which gives the best estimate of the interaction point. The vertex collection is accessed with:</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="n">Handle</span><span class="o">&lt;</span><span class="n">reco</span><span class="o">::</span><span class="n">VertexCollection</span><span class="o">&gt;</span><span class="w"> </span><span class="n">vertices</span><span class="p">;</span>
<span class="w">  </span><span class="n">iEvent</span><span class="p">.</span><span class="n">getByToken</span><span class="p">(</span><span class="n">vtxToken_</span><span class="p">,</span><span class="w"> </span><span class="n">vertices</span><span class="p">);</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">reco</span><span class="o">::</span><span class="n">Vertex</span><span class="w"> </span><span class="o">&amp;</span><span class="n">PV</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vertices</span><span class="o">-&gt;</span><span class="n">front</span><span class="p">();</span>
</code></pre></div>
<p>Note that the tracking method depends on the object, the electron tracks are found using the Gaussian-sum filter method <code>gsfTrack</code>.</p>
</div>
</div>
</div>
<h2 id="matching-to-generated-particles">Matching to generated particles<a class="headerlink" href="#matching-to-generated-particles" title="Permanent link">&para;</a></h2>
<p>Simulated files also contain information about the generator-level particles that
were propagated into the showering and detector simulations. Physics objects can
be matched to these generated particles spatially.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Run 1 Data</label><label for="__tabbed_3_2">Run 2 Data</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>The <a href="https://github.com/cms-opendata-analyses/AOD2NanoAODOutreachTool/tree/2012">AOD2NanoAOD tool</a> is an example code extracting objects from AOD file and storing them in an output file. In its <a href="https://github.com/cms-opendata-analyses/AOD2NanoAODOutreachTool/blob/2012/src/AOD2NanoAOD.cc">analyzer code</a>, it sets up several utility functions for matching: <code>findBestMatch</code>,
<code>findBestVisibleMatch</code>, and <code>subtractInvisible</code>. The <code>findBestMatch</code> function takes
generated particles (with an automated type <code>T</code>) and the 4-vector of a physics
object. It uses angular separation to find the closest generated particle to the
reconstructed particle:</p>
<div class="highlight"><pre><span></span><code><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">findBestMatch</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">gens</span><span class="p">,</span><span class="w"> </span><span class="n">reco</span><span class="o">::</span><span class="n">Candidate</span><span class="o">::</span><span class="n">LorentzVector</span><span class="o">&amp;</span><span class="w"> </span><span class="n">p4</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="cp"># initial definition of &quot;closest&quot; is really bad</span>
<span class="w">  </span><span class="kt">float</span><span class="w"> </span><span class="n">minDeltaR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">999.0</span><span class="p">;</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>

<span class="w">  </span><span class="cp"># loop over the generated particles</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gens</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">gens</span><span class="p">.</span><span class="n">end</span><span class="p">();</span><span class="w"> </span><span class="n">g</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">deltaR</span><span class="p">(</span><span class="n">g</span><span class="o">-&gt;</span><span class="n">p4</span><span class="p">(),</span><span class="w"> </span><span class="n">p4</span><span class="p">);</span>

<span class="w">    </span><span class="cp"># if it is closer, overwrite the definition of closest</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">tmp</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">minDeltaR</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">minDeltaR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tmp</span><span class="p">;</span>
<span class="w">      </span><span class="n">idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">gens</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">idx</span><span class="p">;</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">match</span>
<span class="p">}</span>
</code></pre></div>
<p>The other utility functions are similar, but correct for generated particles that
decay to neutrinos, which would affect the "visible" 4-vector.</p>
<p>In the AOD2NanoAOD tool, muons are matched only to "interesting" generated particles, which
are all the leptons and photons (PDG ID 11, 13, 15, 22). Their generator status must be 1,
indicating a final-state particle after any radiation chain.</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">isData</span><span class="p">){</span>
<span class="w">  </span><span class="n">value_gen_n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">selectedMuons</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">selectedMuons</span><span class="p">.</span><span class="n">end</span><span class="p">();</span><span class="w"> </span><span class="n">p</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">      </span><span class="c1">// get the muon&#39;s 4-vector</span>
<span class="w">      </span><span class="k">auto</span><span class="w"> </span><span class="n">p4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="o">-&gt;</span><span class="n">p4</span><span class="p">();</span>

<span class="w">      </span><span class="c1">// perform the matching with a utility function</span>
<span class="w">      </span><span class="k">auto</span><span class="w"> </span><span class="n">idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">findBestVisibleMatch</span><span class="p">(</span><span class="n">interestingGenParticles</span><span class="p">,</span><span class="w"> </span><span class="n">p4</span><span class="p">);</span>

<span class="w">      </span><span class="c1">// if a match was found, save the generated particle&#39;s information</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">idx</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">-1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">interestingGenParticles</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">idx</span><span class="p">;</span>

<span class="w">  </span><span class="c1">// another example of common 4-vector access functions!</span>
<span class="w">        </span><span class="n">value_gen_pt</span><span class="p">[</span><span class="n">value_gen_n</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g</span><span class="o">-&gt;</span><span class="n">pt</span><span class="p">();</span>
<span class="w">        </span><span class="n">value_gen_eta</span><span class="p">[</span><span class="n">value_gen_n</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g</span><span class="o">-&gt;</span><span class="n">eta</span><span class="p">();</span>
<span class="w">        </span><span class="n">value_gen_phi</span><span class="p">[</span><span class="n">value_gen_n</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g</span><span class="o">-&gt;</span><span class="n">phi</span><span class="p">();</span>
<span class="w">        </span><span class="n">value_gen_mass</span><span class="p">[</span><span class="n">value_gen_n</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g</span><span class="o">-&gt;</span><span class="n">mass</span><span class="p">();</span>

<span class="w">  </span><span class="c1">// gen particles also have ID and status from the generator</span>
<span class="w">        </span><span class="n">value_gen_pdgid</span><span class="p">[</span><span class="n">value_gen_n</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g</span><span class="o">-&gt;</span><span class="n">pdgId</span><span class="p">();</span>
<span class="w">        </span><span class="n">value_gen_status</span><span class="p">[</span><span class="n">value_gen_n</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g</span><span class="o">-&gt;</span><span class="n">status</span><span class="p">();</span>

<span class="w">  </span><span class="c1">// save the index of the matched gen particle</span>
<span class="w">        </span><span class="n">value_mu_genpartidx</span><span class="p">[</span><span class="n">p</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">selectedMuons</span><span class="p">.</span><span class="n">begin</span><span class="p">()]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value_gen_n</span><span class="p">;</span>
<span class="w">        </span><span class="n">value_gen_n</span><span class="o">++</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="admonition note">
<p class="admonition-title">To do</p>
<p>This will refer to Run 2 MiniAOD branch of AOD2NanoAODOutreachTool once available</p>
</div>
</div>
</div>
</div>
<!-- ## Challenge: electron matching

Match selected electrons to the interesting generated particles.
Compile your code and run over the simulation test file. Using the
ROOT TBrowser, look at some histograms of the branches you've added to the tree throughout this
episode.

<div class="highlight"><pre><span></span><code><span class="gp">$ </span>scram<span class="w"> </span>b
<span class="gp">$ </span>cmsRun<span class="w"> </span>configs/simulation_cfg.py
<span class="gp">$ </span>root<span class="w"> </span>-l<span class="w"> </span>output.root
<span class="go">[0] TBrowser b</span>
</code></pre></div>

## Solution

The structure for this matching exercise is identical to the muon matching segment. Loop over selected electrons, use the findBestVisibleMatch function to match it to an "interesting" particle and then to a jet.

``` cpp
>>// Match electrons with gen particles and jets
>>for (auto p = selectedElectrons.begin(); p != selectedElectrons.end(); p++) {
>>  // Gen particle matching
>>  auto p4 = p->p4();
>>  auto idx = findBestVisibleMatch(interestingGenParticles, p4);
>>  if (idx != -1) {
>>    auto g = interestingGenParticles.begin() + idx;
>>    value_gen_pt[value_gen_n] = g->pt();
>>    value_gen_eta[value_gen_n] = g->eta();
>>    value_gen_phi[value_gen_n] = g->phi();
>>    value_gen_mass[value_gen_n] = g->mass();
>>    value_gen_pdgid[value_gen_n] = g->pdgId();
>>    value_gen_status[value_gen_n] = g->status();
>>    value_el_genpartidx[p - selectedElectrons.begin()] = value_gen_n;
>>    value_gen_n++;
>>  }
>>
>>  // Jet matching
>>  value_el_jetidx[p - selectedElectrons.begin()] = findBestMatch(selectedJets, p4);
>>}

``` -->





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": [], "search": "../../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.fac441b0.min.js"></script>
      
    
  </body>
</html>